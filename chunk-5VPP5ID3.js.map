{
  "version": 3,
  "sources": ["src/app/routes/main/routes/data/directives/paged-table.directive.ts", "src/app/routes/main/routes/data/components/collection-table/collection-table.component.ts", "src/app/routes/main/routes/data/components/collection-table/collection-table.component.html", "src/app/routes/main/routes/data/data-shared.module.ts"],
  "sourcesContent": ["import { Directive, inject, OnInit } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Table } from 'primeng/table';\r\n\r\n@Directive({\r\n  selector: '[labPagedTable]',\r\n})\r\nexport class PagedTableDirective implements OnInit {\r\n  translateSvc = inject(TranslateService);\r\n  pTable = inject(Table, { self: true });\r\n\r\n  ngOnInit(): void {\r\n    this.pTable.styleClass = 'p-datatable-sm';\r\n    this.pTable.rows = 10;\r\n    this.pTable.rowsPerPageOptions = [10, 25, 50, 100, 250];\r\n    this.pTable.showCurrentPageReport = true;\r\n    this.pTable.currentPageReportTemplate = this.translateSvc.instant(\r\n      'data.currentPageReportTemplate',\r\n    );\r\n  }\r\n}\r\n", "import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  computed,\r\n  inject,\r\n  input,\r\n} from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { Category, Entities, IdType, Item, RecipeJson } from '~/models';\r\nimport { LabState, Settings } from '~/store';\r\nimport { CollectionItem } from '../../models';\r\n\r\ntype Entity = Category | Item | RecipeJson;\r\n\r\n@Component({\r\n  selector: 'lab-collection-table',\r\n  templateUrl: './collection-table.component.html',\r\n  styleUrls: ['./collection-table.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class CollectionTableComponent {\r\n  store = inject(Store<LabState>);\r\n\r\n  ids = input.required<string[]>();\r\n  type = input.required<IdType>();\r\n  useRelativePath = input(false);\r\n\r\n  options = this.store.selectSignal(Settings.getOptions);\r\n  data = this.store.selectSignal(Settings.getDataset);\r\n\r\n  route = computed(() => {\r\n    const type = this.type();\r\n    const useRelativePath = this.useRelativePath();\r\n\r\n    if (useRelativePath) return '';\r\n\r\n    switch (type) {\r\n      case 'category':\r\n        return '/data/categories/';\r\n      case 'item':\r\n        return '/data/items/';\r\n      case 'recipe':\r\n        return '/data/recipes/';\r\n    }\r\n  });\r\n\r\n  value = computed((): CollectionItem[] => {\r\n    const ids = this.ids();\r\n    const type = this.type();\r\n    const data = this.data();\r\n\r\n    let entities: Entities<Entity>;\r\n    switch (type) {\r\n      case 'category':\r\n        entities = data.categoryEntities;\r\n        break;\r\n      case 'item':\r\n        entities = data.itemEntities;\r\n        break;\r\n      case 'recipe':\r\n        entities = data.recipeEntities;\r\n    }\r\n\r\n    return ids\r\n      .filter((i) => entities[i])\r\n      .map((i) => {\r\n        const entity = entities[i];\r\n        const obj: CollectionItem = {\r\n          id: entity.id,\r\n          name: entity.name,\r\n        };\r\n\r\n        if (type !== 'category') {\r\n          obj.category =\r\n            data.categoryEntities[(entity as Item | RecipeJson).category];\r\n        }\r\n\r\n        return obj;\r\n      });\r\n  });\r\n}\r\n", "<p-table\r\n  [value]=\"value()\"\r\n  labPagedTable\r\n  [paginator]=\"value().length > 10\"\r\n  [globalFilterFields]=\"['category.id']\"\r\n>\r\n  <ng-template pTemplate=\"header\">\r\n    <tr>\r\n      <th pSortableColumn=\"name\">\r\n        <span>{{ 'data.name' | translate }}</span>\r\n        <p-sortIcon field=\"name\"></p-sortIcon>\r\n      </th>\r\n      @if (type() !== 'category') {\r\n        <th pSortableColumn=\"category.name\">\r\n          <span>{{ 'data.category' | translate }}</span>\r\n          <p-sortIcon field=\"category.name\"></p-sortIcon>\r\n        </th>\r\n      }\r\n    </tr>\r\n    @if (value().length > 10) {\r\n      <tr>\r\n        <th>\r\n          <p-columnFilter\r\n            type=\"text\"\r\n            field=\"name\"\r\n            matchMode=\"contains\"\r\n          ></p-columnFilter>\r\n        </th>\r\n        @if (type() !== 'category') {\r\n          <th>\r\n            <p-columnFilter field=\"category.id\" matchMode=\"in\">\r\n              <ng-template\r\n                pTemplate=\"filter\"\r\n                let-value\r\n                let-filter=\"filterCallback\"\r\n              >\r\n                <p-multiSelect\r\n                  appendTo=\"body\"\r\n                  [ngModel]=\"value\"\r\n                  [options]=\"options().categories\"\r\n                  [maxSelectedLabels]=\"1\"\r\n                  [selectedItemsLabel]=\"'data.selectedLabel' | translate\"\r\n                  [placeholder]=\"'data.any' | translate\"\r\n                  (onChange)=\"filter($event.value)\"\r\n                ></p-multiSelect>\r\n              </ng-template>\r\n            </p-columnFilter>\r\n          </th>\r\n        }\r\n      </tr>\r\n    }\r\n  </ng-template>\r\n  <ng-template pTemplate=\"body\" let-obj>\r\n    <tr>\r\n      <td>\r\n        <a [routerLink]=\"route() + obj.id\" queryParamsHandling=\"preserve\">\r\n          <button\r\n            pButton\r\n            pRipple\r\n            type=\"button\"\r\n            class=\"p-button-link\"\r\n            [label]=\"obj.name\"\r\n            [icon]=\"obj.id | iconSmClass: type()\"\r\n          ></button>\r\n        </a>\r\n      </td>\r\n      @if (type() !== 'category') {\r\n        <td>\r\n          @if (obj.category) {\r\n            <a\r\n              [routerLink]=\"'/data/categories/' + obj.category.id\"\r\n              queryParamsHandling=\"preserve\"\r\n            >\r\n              <button\r\n                pButton\r\n                pRipple\r\n                type=\"button\"\r\n                class=\"p-button-link\"\r\n                [label]=\"obj.category.name\"\r\n                [icon]=\"obj.category.id | iconSmClass: 'category'\"\r\n              ></button>\r\n            </a>\r\n          }\r\n        </td>\r\n      }\r\n    </tr>\r\n  </ng-template>\r\n</p-table>\r\n", "import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppSharedModule } from '~/app-shared.module';\r\nimport { MainSharedModule } from '../../main-shared.module';\r\nimport { components } from './components';\r\nimport { directives } from './directives';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, AppSharedModule, MainSharedModule],\r\n  declarations: [...components, ...directives],\r\n  exports: [...components, ...directives],\r\n})\r\nexport class DataSharedModule {}\r\n"],
  "mappings": "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",
  "names": []
}
